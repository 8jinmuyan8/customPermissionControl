webpackJsonp([9],{145:function(e,t,a){function n(e){s||a(197)}var s=!1,o=a(58)(a(162),a(218),n,null,null);o.options.__file="/Users/ppd/Desktop/study/customPermission/admin/src/components/setting/menu.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] menu.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},162:function(e,t,a){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{cur:null,menuModal:{opened:!1,data:{id:"",seq:"",name:"",path:"",icon:"",parentId:""},rules:{required:["name","path","seq"]}},menuTree:{keyName:"id",parentName:"parentId",titleName:"displayName",dataMode:"list",datas:[]}}},mounted:function(){this.init()},methods:{init:function(){var t=this;e.get("/sys/menu/list").then(function(e){if("000000"==e.code){var a=e.result;for(var n in a){var s=a[n];s.treeIcon=s.icon,s.displayName=s.name+" --- "+s.seq}t.menuTree.datas=a,t.$refs.menuTree.refresh(),t.cur=null}})},doSave:function(){var t=this,a=this.$refs.form.valid();if(!a.result)return void this.$Message.error("还有"+a.messages.length+"个错误未通过验证。");e.post("/sys/menu/save",this.menuModal.data).then(function(e){t.$Message(e.msg),"000000"==e.code&&(t.menuModal.opened=!1,t.init())})},expandAll:function(){this.$refs.menuTree.expandAll()},foldAll:function(){this.$refs.menuTree.foldAll()},select:function(e){this.cur=e},showAdd:function(e){this.menuModal.opened=!0,this.menuModal.data.id="",this.menuModal.data.parentId=1==e?"":this.cur.id,this.menuModal.data.seq=1,this.menuModal.data.icon="",this.menuModal.data.path="",this.menuModal.data.name=""},showUpdate:function(){this.menuModal.opened=!0,a(this.cur),this.menuModal.data=this.cur},showDel:function(){var t=this;this.$Confirm("确认要删除选中？").then(function(){e.post("/sys/menu/del",{id:t.cur.id}).then(function(e){t.$Message(e.msg),"000000"==e.code&&(t.menuModal.opened=!1,t.init())})})}},computed:{disabled:function(){return null==this.cur}}}}).call(t,a(17),a(30))},197:function(e,t){},218:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"margin",rawName:"v-margin",value:10,expression:"10"}],staticClass:"h-panel"},[a("div",{directives:[{name:"margin",rawName:"v-margin",value:10,expression:"10"}],staticClass:"h-panel-bar"},[a("span",{staticClass:"h-panel-title"},[e._v("系统管理 / 菜单管理")])]),e._v(" "),a("div",{staticClass:"h-panel-body"},[a("div",[a("Button",{on:{click:e.expandAll}},[e._v("全部展开")]),e._v(" "),a("Button",{on:{click:e.foldAll}},[e._v("全部收起")]),e._v(" "),a("Button",{staticClass:"h-btn h-btn-green",on:{click:function(t){e.showAdd(1)}}},[e._v("新增一级菜单")]),e._v(" "),a("Button",{staticClass:"h-btn h-btn-text-green",attrs:{disabled:e.disabled},on:{click:function(t){e.showAdd(2)}}},[a("i",{staticClass:"h-icon-plus"}),e._v(" 新增子菜单")]),e._v(" "),a("Button",{staticClass:"h-btn h-btn-text-green",attrs:{disabled:e.disabled},on:{click:e.showUpdate}},[a("i",{staticClass:"h-icon-edit"}),e._v(" 编辑")]),e._v(" "),a("Button",{staticClass:"h-btn h-btn-text-red",attrs:{disabled:e.disabled},on:{click:e.showDel}},[a("i",{staticClass:"h-icon-trash"}),e._v(" 删除")])],1),e._v(" "),a("div",{staticClass:"top10"},[a("Tree",{directives:[{name:"width",rawName:"v-width",value:400,expression:"400"}],ref:"menuTree",attrs:{filterable:!0,option:e.menuTree,toggleOnSelect:!0},on:{select:e.select},scopedSlots:e._u([{key:"item",fn:function(t){return a("div",{},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.name,expression:"props.item.name"}],attrs:{type:"text"},domProps:{value:t.item.name},on:{input:function(a){a.target.composing||e.$set(t.item,"name",a.target.value)}}}),a("i",{staticClass:"h-icon-edit"}),a("i",{staticClass:"h-icon-trash"})])}}])})],1)]),e._v(" "),a("Modal",{attrs:{"close-on-mask":!1,"has-divider":!0,hasCloseIcon:!0},model:{value:e.menuModal.opened,callback:function(t){e.$set(e.menuModal,"opened",t)},expression:"menuModal.opened"}},[a("div",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(""==e.menuModal.data.id?"新增":"编辑")+"菜单")]),e._v(" "),a("div",[a("Form",{ref:"form",attrs:{"label-width":80,model:e.menuModal.data,rules:e.menuModal.rules,top:.2}},[a("FormItem",{attrs:{label:"名称",prop:"name"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.menuModal.data.name,expression:"menuModal.data.name"}],attrs:{type:"text"},domProps:{value:e.menuModal.data.name},on:{input:function(t){t.target.composing||e.$set(e.menuModal.data,"name",t.target.value)}}})]),e._v(" "),a("FormItem",{attrs:{label:"图标",prop:"icon"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.menuModal.data.icon,expression:"menuModal.data.icon"}],attrs:{type:"text"},domProps:{value:e.menuModal.data.icon},on:{input:function(t){t.target.composing||e.$set(e.menuModal.data,"icon",t.target.value)}}})]),e._v(" "),a("FormItem",{attrs:{label:"路径",prop:"path"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.menuModal.data.path,expression:"menuModal.data.path"}],attrs:{type:"text"},domProps:{value:e.menuModal.data.path},on:{input:function(t){t.target.composing||e.$set(e.menuModal.data,"path",t.target.value)}}})]),e._v(" "),a("FormItem",{attrs:{label:"序号",prop:"seq"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.menuModal.data.seq,expression:"menuModal.data.seq"}],attrs:{type:"text",placeholder:"请输入数字"},domProps:{value:e.menuModal.data.seq},on:{input:function(t){t.target.composing||e.$set(e.menuModal.data,"seq",t.target.value)}}})])],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"h-btn",on:{click:function(t){e.menuModal.opened=!1}}},[e._v("取消")]),e._v(" "),a("button",{staticClass:"h-btn h-btn-primary",on:{click:e.doSave}},[e._v("确定")])])])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});