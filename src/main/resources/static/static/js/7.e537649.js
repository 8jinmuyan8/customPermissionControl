webpackJsonp([7],{147:function(e,t,a){function o(e){n||a(189)}var n=!1,s=a(58)(a(164),a(210),o,null,null);s.options.__file="/Users/ppd/Desktop/study/customPermission/admin/src/components/setting/sysRole.vue",s.esModule&&Object.keys(s.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] sysRole.vue: functional components are not supported with templates, they should use render functions."),e.exports=s.exports},164:function(e,t,a){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{search:{page:1,pageSize:10,total:0},roleModal:{opened:!1,data:{id:"",rname:"",description:"",domainName:"",inserttime:"",updatetime:""}},menuModal:{opened:!1,roleID:"",rname:"",data:[],menuTree:{keyName:"id",parentName:"parentId",titleName:"name",dataMode:"list",datas:[]}},list:[]}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.loadData(),e.get("/sys/menu/list").then(function(e){if("000000"==e.code){var a=e.result;for(var o in a){var n=a[o];n.treeIcon=n.icon}t.menuModal.menuTree.datas=a}})},loadData:function(){var t=this;e.post("/sys/role/list",this.search).then(function(e){if("000000"==e.code){var o=e.result,n=o.list;t.list=null==n?[]:n,t.search.total=o.total,a(t.list)}})},doSearch:function(){this.search.page=1,this.loadData()},doSave:function(){var t=this,o=this.roleModal.data;e.post("/sys/role/save",o).then(function(e){t.$Message(e.msg),a(e),"000000"==e.code&&(t.roleModal.opened=!1,t.loadData())})},menuConfirm:function(){var t=this,a="",o=this.menuModal.data;for(var n in o)a+=o[n]+",";var s={roleID:this.menuModal.roleID,menuIds:a};e.post("/sys/role/authMenus",s).then(function(e){t.$Message(e.msg),"000000"==e.code&&(t.menuModal.opened=!1)})},showMenu:function(t){var a=this;this.menuModal.opened=!0,this.menuModal.roleID=t.id,this.menuModal.rname=t.rname,this.menuModal.data=[],e.get("/sys/role/menuIds?roleID="+t.id).then(function(e){"000000"==e.code&&(a.menuModal.data=e.result,a.$refs.menuTree.refresh())})},showAdd:function(){this.roleModal.opened=!0,this.roleModal.data.id=null,this.roleModal.data.rname="",this.roleModal.data.description=""},showUpdate:function(e){this.roleModal.opened=!0,this.roleModal.data.id=e.id,this.roleModal.data.rname=e.rname,this.roleModal.data.description=e.description},showDelete:function(t){var a=this;this.$Confirm("确认要删除"+t.rname+"？").then(function(){e.post("/sys/role/delete",{rid:t.rid}).then(function(e){a.$Message(e.msg),"000000"==e.code&&(a.roleModal.opened=!1,a.loadData())})}).catch(function(e){console.log(e)})},pageChange:function(e){this.search.page=e.cur,this.search.pageSize=e.size,this.loadData()}},computed:{}}}).call(t,a(17),a(30))},189:function(e,t){},210:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"margin",rawName:"v-margin",value:10,expression:"10"}],staticClass:"h-panel"},[a("div",{directives:[{name:"margin",rawName:"v-margin",value:10,expression:"10"}],staticClass:"h-panel-bar"},[a("span",{staticClass:"h-panel-title"},[e._v("系统管理/角色管理")]),e._v(" "),a("div",{staticClass:"right"},[a("button",{staticClass:"h-btn h-btn-s h-btn-green",on:{click:e.showAdd}},[a("i",{staticClass:"h-icon-plus"}),e._v(" 新增")])])]),e._v(" "),a("div",{staticClass:"h-panel-body"},[a("Form",{ref:"form",attrs:{mode:"inline","label-width":120,model:e.search,top:.2}},[a("FormItem",{attrs:{label:"角色名"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search.rname,expression:"search.rname"}],attrs:{type:"text"},domProps:{value:e.search.rname},on:{input:function(t){t.target.composing||e.$set(e.search,"rname",t.target.value)}}})]),e._v(" "),a("FormItem",[a("Button",{attrs:{color:"blue"},on:{click:e.doSearch}},[a("i",{staticClass:"h-icon-search"}),e._v(" 查询")])],1)],1),e._v(" "),a("Table",{attrs:{datas:e.list,stripe:""}},[a("TableItem",{attrs:{title:"No.",width:50},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.index+1))]}}])}),e._v(" "),a("TableItem",{attrs:{title:"角色名",prop:"rname"}}),e._v(" "),a("TableItem",{attrs:{title:"角色描述",prop:"description"}}),e._v(" "),a("TableItem",{attrs:{title:"操作人",prop:"domainName"}}),e._v(" "),a("TableItem",{attrs:{title:"创建时间",prop:"inserttime"}}),e._v(" "),a("TableItem",{attrs:{title:"更新时间",prop:"updatetime"}}),e._v(" "),a("TableItem",{attrs:{title:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("button",{staticClass:"h-btn h-btn-s",on:{click:function(a){e.showUpdate(t.data)}}},[a("i",{staticClass:"h-icon-edit"}),e._v(" 编辑\n                    ")]),e._v(" "),a("button",{staticClass:"h-btn h-btn-s",on:{click:function(a){e.showMenu(t.data)}}},[a("i",{staticClass:"h-icon-setting"}),a("span",[e._v("菜单权限")])]),e._v(" "),a("button",{staticClass:"h-btn h-btn-s h-btn-text-red",on:{click:function(a){e.showDelete(t.data)}}},[a("i",{staticClass:"h-icon-trash"}),e._v(" 删除\n                    ")])]}}])})],1),e._v(" "),a("div",{staticClass:"top10"},[a("Pagination",{attrs:{cur:e.search.page,pagerSize:e.search.pageSize,total:e.search.total},on:{change:e.pageChange}})],1)],1),e._v(" "),a("Modal",{attrs:{"close-on-mask":!1,"has-divider":!0,hasCloseIcon:!0},model:{value:e.roleModal.opened,callback:function(t){e.$set(e.roleModal,"opened",t)},expression:"roleModal.opened"}},[a("div",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(null==e.roleModal.data.rid?"新增":"编辑")+"角色")]),e._v(" "),a("div",[a("Form",{ref:"form",attrs:{"label-width":100,model:e.roleModal.data,rules:e.roleModal.rules,top:.2}},[a("FormItem",{attrs:{label:"角色名",prop:"rname"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.roleModal.data.rname,expression:"roleModal.data.rname"}],attrs:{type:"text"},domProps:{value:e.roleModal.data.rname},on:{input:function(t){t.target.composing||e.$set(e.roleModal.data,"rname",t.target.value)}}})]),e._v(" "),a("FormItem",{attrs:{label:"角色描述",prop:"description"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.roleModal.data.description,expression:"roleModal.data.description"}],attrs:{type:"text"},domProps:{value:e.roleModal.data.description},on:{input:function(t){t.target.composing||e.$set(e.roleModal.data,"description",t.target.value)}}})])],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"h-btn",on:{click:function(t){e.roleModal.opened=!1}}},[e._v("取消")]),e._v(" "),a("button",{staticClass:"h-btn h-btn-primary",on:{click:e.doSave}},[e._v("确定")])])]),e._v(" "),a("Modal",{attrs:{"close-on-mask":!1,"has-divider":!0,hasCloseIcon:!0},model:{value:e.menuModal.opened,callback:function(t){e.$set(e.menuModal,"opened",t)},expression:"menuModal.opened"}},[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("["+e._s(e.menuModal.rname)+"]菜单权限")]),e._v(" "),a("div",[a("Tree",{ref:"menuTree",attrs:{option:e.menuModal.menuTree,multiple:!0,"choose-mode":"some"},model:{value:e.menuModal.data,callback:function(t){e.$set(e.menuModal,"data",t)},expression:"menuModal.data"}})],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"h-btn",on:{click:function(t){e.menuModal.opened=!1}}},[e._v("取消")]),e._v(" "),a("button",{staticClass:"h-btn h-btn-primary",on:{click:e.menuConfirm}},[e._v("确定")])])])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});